!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).SVGFilter={})}(this,(function(t){"use strict";var e={textOnImage:{options:{image:{type:"image",attrs:{href:"",x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}},text:{type:"text",content:"",attrs:{x:"50%",y:"52%","font-size":"3.6em","text-anchor":"middle","alignment-baseline":"middle",fill:"#2a6350",filter:"url(#conform)"}}},schema(){return{x:0,y:0,width:800,height:800,children:[this.options.image,this.options.text],filters:[{attrs:{id:"conform"},filters:[{type:"feImage",attrs:{href:"",x:"0",y:"0",width:"100%",height:"100%",preserveAspectRatio:"none",result:"ORIGIN_IMAGE"}},{type:"feColorMatrix",attrs:{in:"ORIGIN_IMAGE",type:"saturate",values:"0",result:"GRAY_IMAGE"}},{type:"feDisplacementMap",attrs:{in:"SourceGraphic",in2:"GRAY_IMAGE",scale:"15",xChannelSelector:"R",yChannelSelector:"R",result:"TEXTURED_TEXT"}},{type:"feImage",attrs:{href:"",x:"0",y:"0",width:"100%",height:"100%",preserveAspectRatio:"none",result:"BG"}},{type:"feColorMatrix",attrs:{in:"TEXTURED_TEXT",type:"matrix",result:"OPACITY_TEXT",values:"1 0 0 0 0\n              0 1 0 0 0\n              0 0 1 0 0\n              0 0 0 .9 0"}},{type:"feBlend",attrs:{in:"BG",in2:"OPACITY_TEXT",mode:"multiply",result:"BLEND_TEXT"}}]}]}}}};const n="http://www.w3.org/2000/svg",r={x:0,y:0,attrs:{},width:100,height:100,children:[],filters:[]};function o(t){var e;const r=document.createElementNS(n,"svg");r.setAttribute("viewBox",`${t.x} ${t.y} ${t.width} ${t.height}`),t.attrs&&Object.keys(t.attrs).forEach((e=>{var n;r.setAttribute(e,null===(n=t.attrs)||void 0===n?void 0:n[e])}));const o=[];(null===(e=t.children)||void 0===e?void 0:e.length)&&t.children.forEach((t=>{"image"===t.type&&o.push(function(t){const e=document.createElementNS(n,"image");return t&&Object.keys(t).forEach((n=>{e.setAttribute(n,null==t?void 0:t[n])})),e}(t.attrs)),"text"===t.type&&o.push(function(t="",e){const r=document.createElementNS(n,"text");return r.innerHTML=t,e&&Object.keys(e).forEach((t=>{r.setAttribute(t,null==e?void 0:e[t])})),r}(t.content,t.attrs))}));const i=function(t){const e=document.createElementNS(n,"defs");return(null==t?void 0:t.length)&&e.append(...t),e}(function(t){const e=[];return(null==t?void 0:t.length)&&t.forEach((t=>{var r;const o=document.createElementNS(n,"filter");t.attrs&&Object.keys(t.attrs).forEach((e=>{var n;o.setAttribute(e,null===(n=t.attrs)||void 0===n?void 0:n[e])}));const i=null===(r=t.filters)||void 0===r?void 0:r.map((t=>{const e=document.createElementNS(n,t.type);return t.attrs&&Object.keys(t.attrs).forEach((n=>{var r;e.setAttribute(n,null===(r=t.attrs)||void 0===r?void 0:r[n])})),e}));(null==i?void 0:i.length)&&o.append(...i),e.push(o)})),e}(t.filters));return r.append(i,...o),r}function i(t,e){return"object"==typeof t&&"object"==typeof e&&null!==t&&null!==e?Array.isArray(t)&&Array.isArray(e)?[...t,...e]:Object.keys(t).reduce(((n,r)=>(n[r]=i(n[r],i(t[r],e[r])),n)),Object.assign(Object.assign({},t),e)):null!=e?e:t}function s(t,n){const r=e[t],o={};(null==r?void 0:r.options)&&n.options&&Object.keys(n.options).forEach((t=>{var e;const o=t;r.options[o]=i(r.options[o],null===(e=n.options)||void 0===e?void 0:e[t])}));const s=r.schema();return Object.keys(s).forEach((t=>{const e=t;o[e]=i(s[e],o[e])})),o}function a(t){const e=o(i(r,t));return{svg:e,show(t){const n="string"==typeof t?document.querySelector(t):t;null==n||n.append(e)}}}t.createSvgFilter=a,t.default=a,t.extendPreset=s,t.textOnImage=function(t,e,n){return a(s("textOnImage",{options:{image:{attrs:Object.assign(Object.assign({},null==n?void 0:n.image),{href:e})},text:{content:t,attrs:Object.assign({},null==n?void 0:n.text)}}}))},Object.defineProperty(t,"__esModule",{value:!0})}));
